<Window x:Class="ZViewer.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="Enhanced Event Log Viewer" Height="800" Width="1200"
            WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" Background="#F0F0F0" Padding="10,5">
            <StackPanel Orientation="Horizontal">
                <Button Name="RefreshButton" Content="🔄 Refresh" Width="80" Height="30" 
                            Margin="0,0,10,0" Click="RefreshButton_Click"/>
                <Button Name="FilterButton" Content="🔍 Filter" Width="80" Height="30" 
                            Margin="0,0,10,0" Click="FilterButton_Click"/>
                <Button Name="ExportButton" Content="📁 Export" Width="80" Height="30" 
                            Margin="0,0,10,0" Click="ExportButton_Click"/>
                <ProgressBar Name="LoadingProgressBar" Width="200" Height="20" 
                                Margin="20,0,0,0" Visibility="Hidden"/>
            </StackPanel>
        </Border>

        <!-- Main Data Grid -->
        <DataGrid Grid.Row="1" Name="EventDataGrid" 
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column"
                      SelectionMode="Single"
                      CanUserSortColumns="True"
                      CanUserReorderColumns="True"
                      VirtualizingPanel.IsVirtualizing="True"
                      VirtualizingPanel.VirtualizationMode="Recycling"
                      EnableRowVirtualization="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Log" Binding="{Binding LogName}" Width="80"/>
                <DataGridTextColumn Header="Level" Binding="{Binding Level}" Width="80"/>
                <DataGridTextColumn Header="Date and Time" Binding="{Binding TimeCreated, StringFormat='yyyy-MM-dd HH:mm:ss'}" Width="140"/>
                <DataGridTextColumn Header="Source" Binding="{Binding Source}" Width="200"/>
                <DataGridTextColumn Header="Event ID" Binding="{Binding EventId}" Width="80"/>
                <DataGridTextColumn Header="Task Category" Binding="{Binding TaskCategory}" Width="150"/>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
            </DataGrid.Columns>
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Level}" Value="Critical">
                            <Setter Property="Background" Value="#FFEBEE"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Level}" Value="Error">
                            <Setter Property="Background" Value="#FFEBEE"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Level}" Value="Warning">
                            <Setter Property="Background" Value="#FFF8E1"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#F0F0F0" Padding="10,5">
            <TextBlock Name="StatusTextBlock" Text="Ready" VerticalAlignment="Center"/>
        </Border>
    </Grid>
</Window>